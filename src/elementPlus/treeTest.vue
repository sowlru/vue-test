<template>
  <el-tree
    :allow-drop="allowDrop"
    :data="dataSource"
    :props="defaultProps"
    draggable
  >
    <template #default="{ node }">
      <span class="custom-tree-node">
        <span>{{ node.label }}</span>
        <span>
          <a @click="append(data)"> Append </a>
          <a style="margin-left: 8px" @click="remove(node, data)"> Delete </a>
        </span>
      </span>
    </template>
  </el-tree>
</template>
<script>
export default {
  data() {
    return {
      dataSource: [
        {
          name: '0 - –û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è',
          children: [
            { name: '0 - –û–± —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ' },
            { name: '1 - –ú–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏' }
          ]
        },
        {
          name: '1 - –®–∞—Å—Å–∏',
          children: [
            {
              name: '11 - –ü–æ–¥–≤–µ—Å–∫–∞',
              children: [
                { name: '1 - –ü–µ—Ä–µ–¥–Ω—è—è –ø–æ–¥–≤–µ—Å–∫–∞' },
                { name: '2 - –ó–∞–¥–Ω—è—è –ø–æ–¥–≤–µ—Å–∫–∞' }
              ]
            },
            { name: '12 - –ö–æ–ª–µ—Å–∞ –∏ —Å—Ç—É–ø–∏—Ü—ã' }
          ]
        }
      ],
      defaultProps: {
        children: 'children',
        label: 'name'
      }
    }
  },
  methods: {
    allowDrop(draggingNode, dropNode, type) {
      console.log('üöÄ ~ file: treeTest.vue:82 ~ allowDrop ~ allowDrop:')
      if (dropNode.data.name === 'Level two 3-1') {
        return type !== 'inner'
      } else {
        return true
      }
    }
  }
}
</script>
